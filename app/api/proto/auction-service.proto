syntax = "proto3";

package auctionservice;

import "google/protobuf/timestamp.proto";

// Message Definitions

message Bid {
  int64 bid_id = 1;
  int64 user_id = 2;
  int64 catalogue_id = 3;
  double amount = 4;
  google.protobuf.Timestamp bid_time = 5;
}

// Place Bid Request
message PlaceBidRequest {
  int64 user_id = 1;
  int64 catalogue_id = 2;
  double amount = 3;
}

// Place Bid Response
message PlaceBidResponse {
  bool success = 1;
  string message = 2;
}

message GetAuctionEndRequest {
  int64 catalogue_id = 1;
}

message GetAuctionEndResponse {
  google.protobuf.Timestamp end_time = 1;
}

message GetAuctionStatusRequest {
  int64 catalogue_id = 1;
}

message GetAuctionStatusResponse {
  int64 highest_bidder = 1;
  double current_amount = 2;
  google.protobuf.Timestamp current_time = 3;
}

message GetAuctionWinnerRequest {
  int64 catalogue_id = 1;
}

message GetAuctionWinnerResponse {
  int64 winner_user_id = 1;
  double final_price = 2;
}

message GetBidHistoryRequest {
  int64 catalogue_id = 1;
}

message GetBidHistoryResponse {
  repeated Bid bid_history = 1;
}

// Auction Service Definition
service AuctionService {
  rpc PlaceBid(PlaceBidRequest) returns (PlaceBidResponse);

  rpc GetAuctionEnd(GetAuctionEndRequest) returns (GetAuctionEndResponse);

  rpc GetAuctionStatus(GetAuctionStatusRequest) returns (GetAuctionStatusResponse);

  rpc GetAuctionWinner(GetAuctionWinnerRequest) returns (GetAuctionWinnerResponse);

  rpc GetBidHistory(GetBidHistoryRequest) returns (GetBidHistoryResponse);
}

